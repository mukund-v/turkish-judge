<crowd-form answer-format="flatten-objects">
<h2>Please Note</h2>

<ul>
  <li>You have to be an <span style="color: rgb(255, 0, 0);"><b>English Native Speaker</b></span>.</li>
  <li>You have to complete the ratings for all responses.<span style="color: rgb(255, 0, 0);"><b> All fields are required.</b></span></li>
</ul>

<h2>Informed Consent</h2>

<p>This is a linguistic experiment performed at the University of Pennsylvania. If you have any question about this study, feel free to contact Dr. Chris Callison-Burch. Participation in this research is voluntary. You have the right to withdraw from the experiment at any time. The collected data will be used for research purposes only. Personal data will be kept confidential and will not be shared with third parties.</p>

<h2>Instructions</h2>

<p>In this task you will read 5 prompts. For each prompt you will see possible responses to these prompts generated by a computer program. The programs attempts to generate responses that are relevant, while also making an interesting contribution to the conversation.</p>

<p>For each prompt, you will read 8 possible responses, and judge each response on its appropriateness on a 1 to 5 scale from not at all appropriate to extremely approriate. Appopriateness is defined as follows:</p>

<font size="+2">
<ol>
  <li><font color="red">Appropriateness: </font>Given the context is the response on topic, interesting, and fluent?</li>
</ol>
</font>

<p><i>Example:</i> Below we show a prompt and several possible responses, along with suggested scores for each response.</p>

<p><b>Prompt: What do you do for work?</b></p>

<table class="instructions">
  <thead>
  <tr>
    <th><b>Responses</b></th>
    <th><b>Suggested scores</b></th>
  </tr>
  </thead>
  <tr>
    <th>I'm a what?</th>
    <th>2. The response is grammatically correct, but does not answer the question and is an incoherent response to the question.</th>
  </tr>
  <tr>
    <th>What the what?</th>
    <th>1. The response is not grammatical, on topic, or an answer to the question.</th>
  </tr>
  <tr>
    <th>I like pancakes.</th>
    <th>3. The response is grammatical and not generic, but it does not answer the question.</th>
  </tr>
  <tr>
    <th>How are you?</th>
    <th>3. The response is grammatical and interesting but it is not on topic.</th>
  </tr>
  <tr>
    <th>I don't know.</th>
    <th>4. This response is grammatical and an answer to the question but it leaves information out and could be more thorough.</th>
  </tr>
  <tr>
    <th>What?</th>
    <th>2. The response is grammatical but it is not interesting or on topic.</th>
  </tr>
  <tr>
    <th>I for work as a teacher.</th>
    <th>4. This is on topic and provides interesting information, but it has a grammatical mistake.</th>
  </tr>
  <tr>
    <th>I'm an artist.</th>
    <th>5. This response is grammatical, and answers the question well.</th>
  </tr>
  <tr>
    <th>I work at the police department.</th>
    <th>5. This response is grammatical, and answers the question well.</th>
  </tr>
  <tr>
    <th> . </th>
    <th>1. The response is not valid at all because it is just a period.</th>
  </tr>

</table>
</br>
<b>Note:</b> ignore things like "i ' m" this should be read as "I'm" and not docked points for grammar.

<style type="text/css">
table {
  font-size: 80%;
  margin-top: 5px;
  text-align: center;
}

.instructions {
  font-size: 100%;
  margin-top: 5px;
}

.instructions th {
  text-align: left;
  font-weight: normal;
}
</style>
<ol>
    {% for prompt in prompts %}
    {% set promptloop = loop %}
    <li><strong>&nbsp;Prompt: </strong>{{ prompt.prompt }}
    
    
  
    {% for model in prompt.models %}
      {% set modelloop = loop %}

      <hr align="left" width="75%" /> <strong>System {{ modelloop.index }}: {{ model.response }}</strong>

      <table border="0" cellpadding="0" cellspacing="0" rules="NONE">
        <tbody>
          <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td align="center">Least</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td align="center">Most</td>
          </tr>
          <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td rowspan="2"><b><font color="#ff0000">Appropriateness</font></b></td>
            <td align="center">&nbsp; 1 &nbsp;</td>
            <td align="center">&nbsp; 2 &nbsp;</td>
            <td align="center">&nbsp; 3 &nbsp;</td>
            <td align="center">&nbsp; 4 &nbsp;</td>
            <td align="center">&nbsp; 5 &nbsp;</td>
          </tr>
          <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}" type="radio" value="1" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}" type="radio" value="2" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}" type="radio" value="3" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}" type="radio" value="4" required/></td>
            <td align="center"><input name="{{ model.bot }}{{ promptloop.index }}" type="radio" value="5" required/></td>
          </tr>
        </tbody>
      </table>

      {% endfor %}
  </li> <hr></br>
    {% endfor %}
</ol>

      <p>Please provide any comments you may have below, we appreciate your input!</p>

      <p><textarea cols="80" name="comment" rows="3">None?</textarea></p>

      <p id="error_message">&nbsp;</p>
      <!-- add some validation code --><script type='text/javascript'>
      window.onload = function() { document.getElementById('submitButton').setAttribute('onclick', 'return validateForm()'); }

      function getCheckValue(checkName)
      {
        var genders = document.getElementsByName(checkName);

        for(var i = 0; i < genders.length; i++) {
           if(genders[i].checked == true) {
               return genders[i].value;
           }
        }
        return ""
      }

      function checkScores() {
        // grammar - mean - simp
        var cnames = ["appropriate"];
        var actual_names = ["Appropriateness"]
        var N_sys = 4;
        var N_sent = 5;
        for(var i = 1; i <= N_sent; i ++)
        {
          for(var j = 1; j <= N_sys; j ++)
          {
            for(var k = 0; k < cnames.length; k ++)
            {
              checkName = cnames[k] + i + "" + j;
              // alert(checkName);
              checkValue = getCheckValue(checkName);
              if(checkValue == "")
              {
                alert("Evaluation for Group " + i + ", System " + j + " is not finished! (" + actual_names[k] + " emtpy!)");
                document.getElementById("error_message").innerHTML = "\<font color=\"red\"\>Evaluation for Group " 
                  + i + ", System " + j + " is not finished! (" + actual_names[k] + " empty!)\<\/font\>";
                return false;
              }
            }
          }
        }
        return true;
      }

      function validateForm() {
        return checkScores();
      }

      </script>
      </crowd-form>